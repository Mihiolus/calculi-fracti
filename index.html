<html>

<head>
    <title>Calculi Fracti</title>
</head>

<body>
    <h1>Calculi Fracti: A Roman fractional calculator</h1>
    <a href="https://github.com/Mihiolus/calculi-fracti">Site created and hosted on GitHub</a>
    <p>You can find out how Romans worked fractions in <a
            href="https://en.wikipedia.org/wiki/Roman_numerals#Fractions">this Wikipedia article</a>.</p>

    <table id="calc">
        <tr>
            <td colspan="3"><input type="text" id="output"></td>
            <td><input type="button" value="c" onclick="clr()"></td>
        </tr>
        <tr>
            <td><input type="button" value=7 onclick="store('7')"></td>
            <td><input type="button" value=8 onclick="store('8')"></td>
            <td><input type="button" value=9 onclick="store('9')"></td>
            <td><input type="button" value=&#247;></td>
        </tr>
        <tr>
            <td><input type="button" value=4 onclick="store('4')"></td>
            <td><input type="button" value=5 onclick="store('5')"></td>
            <td><input type="button" value=6 onclick="store('6')"></td>
            <td><input type="button" value=&#215;></td>
        </tr>
        <tr>
            <td><input type="button" value=1 onclick="store('1')"></td>
            <td><input type="button" value=2 onclick="store('2')"></td>
            <td><input type="button" value=3 onclick="store('3')"></td>
            <td><input type="button" value=&#8722;></td>
        </tr>
        <tr>
            <td><input type="button" value=0 onclick="store('0')"></td>
            <td><input type="button" value=. onclick="store('.')"></td>
            <td><input type="button" value="=" onclick="convert()"></td>
            <td><input type="button" value="+"></td>
        </tr>
    </table>

    <script>
        arabicStr = "";
        function store(value) {
            arabicStr += value;
            convert()
        }
        function convert() {
            var lookup = {
                '\u2180': 1000,
                'C\u2180': 900,
                '\u0110': 500,
                'C\u0110': 400,
                C: 100,
                XC: 90,
                L: 50,
                XL: 40,
                X: 10,
                IX: 9,
                V: 5,
                IV: 4,
                I: 1,
                S: 0.5,
                '\u2059':5/12,
                '\u00B7': 1/12
            },
                roman = '',
                i,
                num = arabicStr;
            for (i in lookup) {
                while (num >= lookup[i]) {
                    roman += i;
                    num -= lookup[i];
                }
            }
            document.getElementById("output").value = roman;
        }
        function clr() {
            document.getElementById("output").value = ""
            arabicStr = ""
        }
    </script>
</body>

</html>